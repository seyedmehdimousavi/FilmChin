<!DOCTYPE html>
<html lang="fa" dir="ltr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>FilmChiin</title>
  <!-- Bootstrap icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <!-- main stylesheet -->
  <link rel="stylesheet" href="style.css">

  <!-- supabase client -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body class="index-body">
<!-- Toast Container -->
<div id="toast-container"></div>
<!-- Active Filters Toast -->
<div id="activeFilters" class="active-filters-toast"></div>
<!-- Header (sticky with blur) -->

<header class="main-header">
  <!-- 🔹 بنر بالای سایت -->
<div class="site-banner">
  <div class="banner-content">
    <span class="banner-logo">
      <img src="/images/banner-icon.png" alt="banner-logo" />
    </span>
    <span class="banner-text">filmchiin.ir</span>
  </div>
</div>
<div class="header">
<div class="search-bar">
  <button id="menuBtn" class="menu-btn" aria-label="menu">
    <img width="96" height="96" src="images/icons8-menu-64.png" alt="menu--v2" style="display:flex;align-items:center;"/>
  </button> 
  <!-- منوی پروفایل بعد از لاگین -->
<div id="profileMenu" class="profile-menu hidden">
  <div class="profile-bubble">
    <div class="profile-username" id="profileUsername">UserName</div>
    <button class="profile-edit">ویرایش مشخصات</button>
    <hr class="profile-divider"/>
    <button id="logoutBtn" class="profile-logout">Logout</button>
  </div>
</div>


  <input id="search" type="text" placeholder="Search..." dir="auto"/>

  <!-- دکمه پروفایل (با استایل icon-inside و انیمیشن رینگ خودش) -->
  <button id="profileBtn" class="icon-inside" style="display:flex;align-items:center;" aria-label="profile">
    <img src="images/icons8-user-96.png" alt="user"/>
    <span id="commentBadge" class="badge" style="display:none;">!</span>
  </button>

  <!-- دکمه close ساده (بدون کلاس icon-inside) -->
  <button id="searchCloseBtn" class="close-btn" style="display:none;" aria-label="close">✕</button>
</div>
    <button id="themeToggle" class="icon-btn" aria-label="toggle theme" style="display: flex;align-items: center;"><img src="images/icons8-moon.apng" alt="bright-moon"/></button>
</div>
    
</header>

<!-- side menu and overlay -->
<div id="menuOverlay" class="menu-overlay"></div>


<nav id="sideMenu" class="side-menu" aria-hidden="true">
  
  <div class="menu-section">
    
     <div class="gs">
        <div id="genreToggle" class="menu-toggle">
           <i class="bi bi-list"></i> Genres
        </div>
        <div id="genreSubmenu" class="submenu" style="display:none;">
           <div id="genreGrid" class="genre-grid"></div>
         </div>
     </div>
     <div class="sl">
       <div id="linksHeader">
         <div style="display: flex;align-items: center;">
           <i class="bi bi-link-45deg"></i> Links
         </div>
           <i class="bi bi-chevron-down toggle-icon"></i>
       </div>
        <div id="socialGrid" class="social-grid hidden"></div>
  </div>
  <div id="ratingFilter" class="rating-filter">
  <h4 class="rating-filter-title">Sort by imdb rating</h4>

  <div class="rating-process-wrapper">
    <div class="rating-min">0</div>
    <div class="rating-track" id="ratingTrack" aria-hidden="false">
      <div class="rating-track-fill" id="ratingFill"></div>
      <div class="rating-knob" id="ratingKnob" role="slider" tabindex="0" aria-valuemin="0" aria-valuemax="10" aria-valuenow="0">
        <div class="rating-bubble" id="ratingBubble" aria-hidden="true">
          Rating &gt; <span id="ratingBubbleValue">0.0</span>
        </div>
      </div>
    </div>
    <div class="rating-max">10</div>
  </div>

  <div class="rating-controls">
    <button id="applyRatingFilter" class="btn small">Apply</button>
  </div>
</div>
</div>



<div id="appVersion" class="genre-chip version-chip">v1.0.0</div>

</nav>


<section class="movie-type-tabs">
  <button data-type="all" class="active">All Movies <span class="count">0</span></button>
  <button data-type="collection">Collections <span class="count">0</span></button>
  <button data-type="series">Series <span class="count">0</span></button>
  <button data-type="single">Single Films <span class="count">0</span></button>
</section>
<div class="tab-genres-wrapper">
  <div class="tab-genres-list"></div>
</div>

<!-- main container -->
<div class="container">
  <!-- admin messages (bubbles above movies) -->
  <div id="adminMessages" class="messages-container" aria-live="polite"></div>
 
  <!-- movies count -->
  <div id="movieCount" class="movie-count">Number of movies: 0</div>

  <!-- movies grid -->
  <div id="moviesGrid" class="movies-grid" role="list"></div>

  <!-- pagination -->
  <div id="pagination" class="pagination-container" aria-label="pagination"></div>
</div>

<!-- Auth Modal -->
<div id="authModal" class="login-modal" aria-hidden="true">
  <div class="login-box">
    <!-- تب‌ها -->
    <div class="auth-tabs">
      <button class="tab-btn active" data-tab="login">Login</button>
      <button class="tab-btn" data-tab="signup">Sign Up</button>
    </div>

    <!-- فرم لاگین -->
    <form id="loginForm" class="tab-content active" data-tab="login">
      <input type="text" id="loginUsername" placeholder="Gmail or Username" required />
      <input type="password" id="loginPassword" placeholder="Password" required />
      <button type="submit" class="login-btn">Login</button>
    </form>

    <!-- فرم ثبت‌نام دو مرحله‌ای -->
    <form id="signupForm" class="tab-content" data-tab="signup" enctype="multipart/form-data">
      <!-- مرحله ۱ -->
      <div id="signupStep1" class="fade-step active-step">
        <input type="email" id="signupEmail" placeholder="Gmail" required />
        <input type="text" id="signupUsername" placeholder="Username" required />
        <input type="password" id="signupPassword" placeholder="Password" required />
      </div>

      <!-- مرحله ۲ -->
      <div id="signupStep2" class="fade-step" style="display:none;">
        <input type="file" id="signupAvatar" accept="image/*" required />
        <small style="font-size:12px;color:#888;">حداکثر حجم عکس: 500KB</small>
      </div>

      <button type="button" id="signupNextBtn" class="login-btn signup-next-btn">
  <img src="/images/icons8-next.apng" alt="next" id="signupNextIcon" style="height:22px;vertical-align:middle;">
  <span id="signupBtnText"></span>
</button>
    </form>
  </div>
</div>


<!-- کانتینر شناور -->
<div class="floating-wrapper">
  <!-- پنل استوری‌ها -->
  <div id="storyPanel" class="story-panel" aria-hidden="true">
    <div class="stories" role="list"></div>
    <button class="go-pagination" type="button">
      go to pagination 
      <img src="images/icons8-double-down.apng" alt="down" style="width:16px;height:16px;vertical-align:middle;"/>
    </button>
  </div>

  <!-- دکمه شناور -->
  <div id="storyToggle" class="floating-btn" aria-label="toggle stories">
    <img id="storyToggleIcon" src="images/icons8-double-left.apng" alt="toggle"/>
  </div>
</div>
<!-- script (app logic) -->
<script src="script.js"></script>
</body>
</html>