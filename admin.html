<!DOCTYPE html>
<html lang="fa" dir="ltr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Admin Panel</title>

  <!-- IRANSans -->
  <link href="https://cdn.fontcdn.ir/Font/Persian/IRANSans/IRANSans.css" rel="stylesheet" type="text/css" />
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <!-- icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

  <!-- styles -->
  <link rel="stylesheet" href="style.css">

  <!-- supabase -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body class="admin-body">
<!-- Toast Container -->
<div id="toast-container"></div>
<header class="main-header">
  <!-- ğŸ”¹ Ø¨Ù†Ø± Ø¨Ø§Ù„Ø§ÛŒ Ø³Ø§ÛŒØª -->
  <div class="site-banner">
    <div class="banner-content">
      <span class="banner-logo">
        <img src="/images/banner-icon.png" alt="banner-logo" />
      </span>
      <span class="banner-text">filmchiin.ir</span>
    </div>
  </div>

  <!-- ğŸ”¹ Ù‡Ø¯Ø± -->
  <div class="header">
    <div class="search-bar">
      <!-- Ø¯Ú©Ù…Ù‡ Ø¨Ø±Ú¯Ø´Øª Ø¨Ù‡ Ø³Ø§ÛŒØª -->
      <a href="index.html" id="backToSiteBtn" class="menu-btn" aria-label="back">
        <img width="32" height="32" src="images/icons8-back-to-50.png" alt="back"/>
      </a>

      <!-- Ù…Ù†ÙˆÛŒ Ù¾Ø±ÙˆÙØ§ÛŒÙ„ (Ù…Ø«Ù„ index) -->
      <div id="profileMenu" class="profile-menu hidden">
        <div class="profile-bubble">
          <div class="profile-username" id="profileUsername">Admin</div>
          <div class="button-wrap">
               <button class="profile-edit"><span>Edit profile</span></button>
               <div class="button-shadow">
               </div>
          </div>
          <hr class="profile-divider"/>
          <div class="button-wrap">
              <button id="logoutBtn" class="profile-logout">logout</button>
              <div class="button-shadow"></div>
          </div>
        </div>
      </div>

      <!-- Ù…ØªÙ† Ø«Ø§Ø¨Øª Admin Panel Ø¨Ù‡ Ø¬Ø§ÛŒ Ø³Ø±Ú† -->
      <div class="admin-title">Admin Panel</div>

      <!-- Ø¯Ú©Ù…Ù‡ Ù¾Ø±ÙˆÙØ§ÛŒÙ„ -->
      <button id="profileBtn" class="icon-inside" aria-label="profile">
        <img src="images/icons8-user-96.png" alt="user"/>
      </button>
    </div>

    <!-- Ø¯Ú©Ù…Ù‡ ØªØºÛŒÛŒØ± ØªÙ… -->
    <button id="themeToggle" class="icon-btn" aria-label="toggle theme">
      <img src="images/icons8-moon.apng" alt="dark-mode"/>
    </button>
  </div>
</header>
<main>
  <div class="admin-tabs">
  <button class="tab-btn active" data-target="posts" type="button">
    <div class="tab-circle">
      <img src="images/icons8-share.apng" alt="posts">
    </div>
  </button>
  <button class="tab-btn" data-target="messages" type="button">
  <div class="tab-circle">
    <img src="images/icons8-message.apng" alt="messages">
    <span id="adminMessagesBadge" class="badge" style="display:none;">!</span>
  </div>
</button>
  <button class="tab-btn" data-target="comments" type="button">
    <div class="tab-circle">
      <img src="images/icons8-comment.apng" alt="comments">
    </div>
  </button>
  <button class="tab-btn" data-target="links" type="button">
    <div class="tab-circle">
      <img src="images/icons8-link.apng" alt="links">
    </div>
  </button>
  <button class="tab-btn" data-target="analytics" type="button">
  <div class="tab-circle">
    <img src="images/icons8-combo-chart.apng" alt="analytics">
  </div>
</button>
<button class="tab-btn" data-target="users" type="button">
  <div class="tab-circle">
    <img src="/images/icons8-users-48.png" alt="users">
  </div>
</button>
</div>
  <section id="adminProfile" class="admin-section">
    

    
    
    <section class="send_post admin-section-item-1 admin-section-item">
      <h2>Post Management</h2>

    <!-- add / edit movie form -->
    <form id="addMovieForm" class="admin-form" enctype="multipart/form-data">
  <!-- ÙØ±Ù… Ø§ØµÙ„ÛŒ ÙÛŒÙ„Ù… ØªÚ©ÛŒ -->
  <input id="title" type="text" placeholder="Title" />
  <input id="coverFile" type="file" accept="image/*" />
  <input id="link" type="text" placeholder="File Link" />
  <textarea id="synopsis" placeholder="Synopsis"></textarea>
  <input id="director" type="text" placeholder="Director" />
  <input id="product" type="text" placeholder="Product" />
  <input id="stars" type="text" placeholder="Stars" />
  <input id="imdb" type="text" placeholder="IMDB" />
  <input id="release_info" type="text" placeholder="Release Info" />
  <input id="genre" type="text" placeholder="Genre (space-separated)" />
<input type="hidden" id="mode" name="mode" value="single">
  <!-- Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Collection / Serial -->
  <div id="bundle-toggle" class="admin-form">
    <button type="button" id="btn-collection" class="admin-submit">Collection</button>
    <button type="button" id="btn-serial" class="admin-submit">Serial</button>
  </div>

  <!-- Ú©Ø§Ù†ØªÛŒÙ†Ø± ÙØ±Ù…â€ŒÙ‡Ø§ÛŒ Ù¾ÙˆÛŒØ§ -->
  <div id="bundle-forms"></div>

  <!-- Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ø§ÙØ²ÙˆØ¯Ù†/Ø­Ø°Ù -->
  <div id="bundle-actions" class="admin-form" hidden>
    <button type="button" id="btn-add-item" class="admin-submit"></button>
    <button type="button" id="btn-remove-last" class="admin-submit danger"></button>
  </div>

  <!-- Ø¯Ú©Ù…Ù‡ Ø§Ø±Ø³Ø§Ù„ -->
  <button type="submit" class="admin-submit">
    Submit and Send <i class="bi bi-cloud-upload"></i>
  </button>
</form>
    </section>
    
    
    
    <section class="admin_messages admin-section-item-2 admin-section-item">
      <!-- admin messages section -->
      <h2>Admin Messages</h2>
      <form id="addMessageForm" class="admin-form">
        <textarea id="messageText" placeholder="Write a message..."></textarea>
        <button type="submit" class="admin-submit">Submit message <i class="bi bi-chat-dots"></i></button>
      </form>
      <div id="messageList" class="message-list" aria-live="polite"></div>

    </section>
    
    <!-- Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† -->
<section id="usersMessages" class="admin-section-item admin_messages_users">
  <h2>Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†</h2>

  <!-- Ú¯Ø±ÛŒØ¯ Ù¾Ø±ÙˆÙØ§ÛŒÙ„â€ŒÙ‡Ø§ -->
  <div id="userThreadsGrid" class="user-threads-grid"></div>

  <!-- Ù¾ÛŒØ¬ÛŒÙ†ÛŒØ´Ù† Ø§Ø®ØªØµØ§ØµÛŒ -->
  <div id="userThreadsPagination" class="pagination-users"></div>

  <!-- Ø§ÙˆÙˆØ±Ù„ÛŒ Ù†Ù…Ø§ÛŒØ´ Ú¯ÙØªâ€ŒÙˆÚ¯Ùˆ -->
  <div id="adminThreadOverlay" class="chat-overlay" aria-hidden="true">
    <div class="chat-overlay-header">
      <button id="adminThreadBackBtn" class="chat-back-btn" aria-label="back">&larr;</button>
      <img id="adminThreadAvatar" class="chat-admin-avatar" src="images/icons8-user-96.png" alt="user" />
      <div id="adminThreadTitle" class="chat-overlay-title">Ú¯ÙØªâ€ŒÙˆÚ¯Ùˆ</div>
    </div>

    <div id="adminThreadMessages" class="chat-messages-list"></div>

    <div class="chat-composer">
      <button id="adminThreadAttachBtn" class="chat-icon-btn" aria-label="attach">
        <img src="images/icons8-attach-60.png" alt="attach" />
      </button>
      <input id="adminThreadAttachFile" type="file" accept="image/*" hidden />
      <input id="adminThreadInput" type="text" placeholder="Ù¾Ø§Ø³Ø® Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯..." />
      <button id="adminThreadSendBtn" class="chat-icon-btn disabled" aria-label="send">
        <img src="images/icons8-send-90.png" alt="send" />
      </button>
    </div>
  </div>
</section>

    <section id="unapproved-comments-section" class="admin-section-item-3 admin-section-item">
      <h2>Unpublished Comments</h2>
      <div id="unapprovedComments"></div>
    </section>


    <section id="social-links-section" class="admin-section-item-4 admin-section-item">
        <h2>Links in sidemenu</h2>
        <form id="addSocialForm" class="admin-form">
           <input id="socialTitle" type="text" placeholder="Title" required />
           <input id="socialIcon" type="file" accept="image/*" />
           <input id="socialUrl" type="text" placeholder="Link" required />
           <button type="submit" class="admin-submit">Add link</button>
        </form>
        <div id="socialList" class="message-list"></div>
        
        
        <div class="admin-section">
  <h3>App Version</h3>
  <input type="text" id="versionInput" placeholder="Ù…Ø«Ù„Ø§Ù‹ 1.3.3">
  <button id="saveVersionBtn">Save</button>
</div>
    </section>
    
    <section class="released_movies admin-section-item-5 admin-section-item">
       <!-- admin search (after messages, before movie list) -->
      <div class="admin-search-wrapper">
        <h2>Search in released movies</h2>
        <input id="adminSearch" class="admin-search-input" type="text" placeholder="Search movies..." />
      </div>
      <div>
        <h2>Released Movies</h2>
        <!-- movie list -->
        <div id="movieList" class="movie-list"></div>
        <div id="admin-pagination" class="pagination-container"></div>
      </div>
    </section>
    
  <section id="popular-movies-section" class="admin-section-item">
  <h2>ÙÛŒÙ„Ù…â€ŒÙ‡Ø§ÛŒ Ù¾Ø±Ø·Ø±ÙØ¯Ø§Ø±</h2>
  <div id="popularMoviesList" class="movie-list"></div>
</section>
    
  <section id="analytics" class="admin-section-item-6 admin-section-item" style="display:none;">
  <h2>Analytics</h2>

  <h3>Daily visits</h3>
  <canvas id="visitsChart" height="120"></canvas>

  <h3>Top searches</h3>
  <div id="topSearches"></div>

  <h3>Top clicks</h3>
  <div id="topClicks"></div>
</section>

<section id="users" class="admin-section-item-7 admin-section-item" style="display:none;">
  <h2>Users & Admins</h2>

  <!-- Admins list -->
  <div class="card grey-box" style="margin-bottom:20px;padding:10px;border-radius:8px;background:#f0f0f0;">
    <h3>Admins List</h3>
    <div id="adminsContainer" class="white-box" style="background:#fff;padding:10px;border-radius:6px;"></div>
  </div>

  <!-- Users list -->
  <div class="card grey-box" style="padding:10px;border-radius:8px;background:#f0f0f0;">
    <h3>Users List</h3>
    <div class="search-bar" style="display:flex;align-items:center;gap:8px;">
      <input type="text" id="userSearch" placeholder="Search..." style="flex:1;padding:6px;">
      <button id="clearSearch">âœ•</button>
    </div>
    <div id="usersContainer" class="white-box" style="background:#fff;padding:10px;border-radius:6px;margin-top:10px;"></div>
    <div id="usersPagination" class="pagination-users"></div>
  </div>
</section>
  </section>
</main>
<script src="script.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</body>
</html>